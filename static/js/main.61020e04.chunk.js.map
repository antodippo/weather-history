{"version":3,"sources":["components/ResultsTable.js","components/SearchForm.js","App.js","reportWebVitals.js","index.js"],"names":["ResultsTable","props","className","weatherHistory","map","year","yearWeather","day","date","substring","minTemp","maxTemp","description","wind","rain","src","iconUrl","alt","_uniqueId","SearchForm","useState","enteredLocation","setEnteredLocation","Date","startDate","setStartDate","fetchedLocation","setFetchedLocation","addDays","days","result","setDate","getDate","fetchWeatherHandler","a","start","toISOString","end","currentYear","getFullYear","fetch","process","REACT_APP_AUTH_TOKEN","response","ok","error","json","jsonResponse","data","request","query","type","weather","mintempC","maxtempC","hourly","weatherDesc","value","WindGustKmph","precipMM","weatherIconUrl","push","onSearch","onSubmit","event","preventDefault","required","onChange","target","onDayChange","App","setWeatherHistory","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","require","config","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.61020e04.chunk.js","sourcesContent":["import _uniqueId from \"lodash/uniqueId\";\n\nfunction ResultsTable(props) {\n  return (\n    <div className=\"flex flex-col mx-auto\">\n      {props.weatherHistory.map((year) => (\n        <div className=\"flex flex-row\" key={_uniqueId(\"year-\")}>\n          <div className=\"font-serif font-semibold text-xl p-3 align-middle\">{year.year}</div>\n          {year.yearWeather.map((day) => (\n            <div\n              className=\"bg-gray-100 rounded shadow-md h-50 min-h-50 w-32 min-w-0 m-1 text-xs text-center\"\n              key={_uniqueId(\"day-\")}\n            >\n              <div className=\"font-bold text-sm\">\n                {day.date.substring(8, 10)}/{day.date.substring(5, 7)}\n              </div>\n              <div>Min: {day.minTemp}°C</div>\n              <div>Max: {day.maxTemp}°C</div>\n              <div>{day.description}</div>\n              <div>Wind: {day.wind}km/h</div>\n              <div>Rain: {day.rain}mm</div>\n              <img\n                className=\"rounded shadow-md mx-auto mt-0.5\"\n                src={day.iconUrl}\n                alt={day.description}\n              />\n            </div>\n          ))}\n        </div>\n      ))}\n    </div>\n  );\n}\n\nexport default ResultsTable;\n","import { useState } from \"react\";\nimport DayPickerInput from \"react-day-picker/DayPickerInput\";\nimport \"react-day-picker/lib/style.css\";\n\nfunction SearchForm(props) {\n  const [enteredLocation, setEnteredLocation] = useState(\"\");\n  const [startDate, setStartDate] = useState(new Date());\n  const [fetchedLocation, setFetchedLocation] = useState(\"\");\n\n  const locationChangeHandler = (event) => {\n    setEnteredLocation(event.target.value);\n  };\n\n  const dateChangeHandler = (date) => {\n    setStartDate(date);\n  };\n\n  function submitHandler(event) {\n    event.preventDefault();\n    return fetchWeatherHandler(enteredLocation);\n  }\n\n  function addDays(date, days) {\n    var result = new Date(date);\n    result.setDate(result.getDate() + days);\n    return result;\n  }\n\n  const fetchWeatherHandler = async (enteredLocation) => {\n    const start = addDays(startDate, -3).toISOString();\n    const end = addDays(startDate, 3).toISOString();\n    const currentYear = new Date().getFullYear();\n    const initialYear = currentYear - 5;\n    var weatherHistory = [];\n\n    for (let year = initialYear; year < currentYear; year++) {\n      const response = await fetch(\n        `https://api.worldweatheronline.com/premium/v1/past-weather.ashx` +\n          `?key=${process.env.REACT_APP_AUTH_TOKEN}` +\n          `&q=${enteredLocation}` +\n          `&date=${year}-${start.substring(5, 7)}-${start.substring(8, 10)}` +\n          `&enddate=${year}-${end.substring(5, 7)}-${end.substring(8, 10)}` +\n          `&format=json&tp=24`\n      );\n      if (!response.ok) {\n        setFetchedLocation(`Error: ${response.error}`);\n      }\n      try {\n        const jsonResponse = await response.json();\n        setFetchedLocation(\n          `Retrieved location: ${jsonResponse.data.request[0].query} (${jsonResponse.data.request[0].type})`\n        );\n\n        const yearWeather = jsonResponse.data.weather.map((result) => {\n          return {\n            date: result.date,\n            minTemp: result.mintempC,\n            maxTemp: result.maxtempC,\n            description: result.hourly[0].weatherDesc[0].value,\n            wind: result.hourly[0].WindGustKmph,\n            rain: result.hourly[0].precipMM,\n            iconUrl: result.hourly[0].weatherIconUrl[0].value,\n          };\n        });\n\n        weatherHistory.push({ year: year, yearWeather: yearWeather });\n      } catch (error) {\n        setFetchedLocation(`Error retrieving weather or location`);\n      }\n    }\n\n    props.onSearch(weatherHistory);\n  };\n\n  return (\n    <div className=\"mx-auto max-w-max\">\n      <form onSubmit={submitHandler}>\n        <div className=\"flex flex-row mx-auto min-w-min mb-3\">\n          <div className=\"mr-1\">Location:</div>\n          <div className=\"mr-5\">\n            <input\n              className=\"border rounded shadow\"\n              type=\"text\"\n              required\n              value={enteredLocation}\n              onChange={locationChangeHandler}\n            />\n          </div>\n          <div className=\"mr-1\">Date:</div>\n          <div className=\"rounded shadow-md mr-5\">\n            <DayPickerInput onDayChange={dateChangeHandler} />\n          </div>\n          <div className=\"min-w-min\">\n            <button\n              type=\"submit\"\n              className=\"bg-gray-200 rounded shadow-md text-xs p-0.5 \"\n            >\n              Search\n            </button>\n          </div>\n        </div>\n      </form>\n      <div className=\"mb-5\">{fetchedLocation}</div>\n    </div>\n  );\n}\n\nexport default SearchForm;\n","import \"./App.css\";\nimport { useState } from \"react\";\nimport ResultsTable from \"./components/ResultsTable\";\nimport SearchForm from \"./components/SearchForm\";\n\nfunction App() {\n  const [weatherHistory, setWeatherHistory] = useState([]);\n\n  const searchHandler = (weatherHistory) => {\n    setWeatherHistory(weatherHistory);\n  }\n\n  return (\n    <div className=\"container mx-auto rounded shadow-xl bg-gray-200 mt-10 mb-10\">\n      <div className=\"mx-auto mb-5 mt-10\">\n        <div className=\"mx-auto w-3/4 font-serif font-semibold text-4xl mb-3\">Weather history</div>\n        <div className=\"mx-auto w-3/4\">\n        Try searching a location and a date, the system will retrieve what was the\n        weather like from 3 days before to 3 days after that date, in the last 5 years.\n        </div>\n      </div>\n      <SearchForm onSearch={searchHandler} />\n      <ResultsTable weatherHistory={weatherHistory} />\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nrequire('dotenv').config();\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}